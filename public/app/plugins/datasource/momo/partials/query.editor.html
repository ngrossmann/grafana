<div class="tight-form">
  <ul class="tight-form-list pull-right">
    <li class="tight-form-item">

      <div class="dropdown">
        <a class="pointer dropdown-toggle" data-toggle="dropdown" tabindex="1">
          <i class="fa fa-bars"></i>
        </a>
	<ul class="dropdown-menu pull-right" role="menu">
          <li role="menuitem">
            <a tabindex="1" ng-click="toggleEditorMode()">
              Switch editor mode
            </a>
          </li>
	  <li role="menuitem">
            <a tabindex="1" ng-click="duplicateDataQuery(target)">Duplicate</a>
          </li>
          <li role="menuitem">
            <a tabindex="1" ng-click="moveDataQuery($index, $index-1)">Move up</a>
          </li>
          <li role="menuitem">
            <a tabindex="1" ng-click="moveDataQuery($index, $index+1)">Move down</a>
          </li>
        </ul>
      </div>
    </li>
  </ul>

  <ul class="tight-form-list">
    <li class="tight-form-item" style="min-width: 15px; text-align: center">
      {{target.refId}}
    </li>
    <li>
      <a class="tight-form-item" ng-click="target.hide = !target.hide; get_data();" role="menuitem">
        <i class="fa fa-eye"></i>
      </a>
    </li>
  </ul>
  <ul class="tight-form-list" role="menu">
    <li>
      <input type="text" class="tight-form-input input-large" ng-model="target.target"
        spellcheck='false' ng-model-onblur
        ng-change="get_data()" bs-typeahead="suggestMetrics"
        placeholder="metric name"></input>

        <a bs-tooltip="target.errors.metric"
          style="color: rgb(229, 189, 28)"
          ng-show="target.errors.metric">
          <i class="fa fa-warining"></i>
        </a>
    </li>
    <li class="tight-form-item">
       Merge
    </li>
    <li>
      <select ng-model="target.merge"
         class="tight-form-input input-small"
                    ng-options="m for m in mergeOptions"
                    ng-change="get_data()">
      </select>
    </li>
    <li class="tight-form-item">
      Aggregator
    </li>
    <li>
      <select ng-model="target.function"
         class="tight-form-input input-small"
                    ng-options="agg for agg in functions"
                    ng-change="get_data()">
      </select>
      <a bs-tooltip="target.errors.aggregator"
        style="color: rgb(229, 189, 28)"
        ng-show="target.errors.aggregator">
        <i class="fa fa-warning"></i>
      </a>
    </li>

    <li class="tight-form-item">
      Down Sample
    </li>
    <li>
      <input type="text"
        class="tight-form-input input-small"
        ng-model="target.interval"
        ng-change="get_data()"
	placeholder="1m"></input>
    </li>
    <li class="tight-form-item">
      Alias
    </li>
    <li>
      <input type="text"
        class="tight-form-input input-large"
        ng-model="target.alias"
        spellcheck='false'
        placeholder="series alias"
	ng-blur="get_data()"></input>
    </li>
  </ul>

  <div class="clearfix"></div>
</div>
